(this.webpackJsonpdiceroll=this.webpackJsonpdiceroll||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(7),s=n.n(l),i=(n(13),n(1)),c=n(2),u=n(4),o=n(3),d=n(5),m=function(){function e(t,n){Object(i.a)(this,e),this.type=t,this.text=n}return Object(c.a)(e,[{key:"getNumber",value:function(){return 0!==this.type?0:parseFloat(this.text)}}]),e}(),h=function(e){function t(e,n){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,0,n.toString()))).sides=e,a}return Object(d.a)(t,e),t}(m);function f(e){return new m(0,e.toString())}function p(e){for(var t=[],n=0,a=0;a<e.length;a++){var r=t.length>0?t[t.length-1]:null;n>0?(")"===e[a]?n--:"("===e[a]&&n++,n>0&&(t[t.length-1].text+=e[a])):"+"===e[a]||"-"===e[a]||"*"===e[a]||"/"===e[a]||"d"===e[a]?t.push(new m(1,e[a])):e[a]>="0"&&e[a]<="9"?r&&0===r.type?r.text+=e[a]:t.push(new m(0,e[a])):"("===e[a]&&(n++,t.push(new m(2,"")))}for(var l=0;l<t.length;l++)2===t[l].type&&(t[l]=p(t[l].text));return t}function v(e){return Math.floor(Math.random()*e)+1}function b(e,t,n){return"d"===t?function(e,t){for(var n=[],a=0;a<e;a++)n.length>0&&n.push(new m(1,"+")),n.push(new h(t,v(t)));return n}(e,n):f(function(){switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"d":return function(e,t){for(var n=0,a=0;a<e;a++)n+=v(t);return n}(e,n);default:return e}}())}function E(e,t){for(var n=[],a=0;a<e.length;a++){var r=e[a];if(r.type&&1===r.type&&t.includes(r.text)){var l=b(n[n.length-1].getNumber(),r.text[0],e[a+1].getNumber());n.pop(),n.push(l),a++}else n.push(r)}return n}function y(e){for(var t=e.slice(),n=0;n<t.length;n++)Array.isArray(t[n])&&(t[n]=f(y(t[n])));return t=E(t,["d"]),t=E(t,["*","/"]),(t=E(t,["+","-"])).length>=1?t[0].getNumber():0}var g={parseSymbols:p,calculate:function(e){if(!function(e){function t(t){var n=new RegExp("\\"+t,"g");return(e.match(n)||[]).length}var n=!!e.match(/^\(*\d+(\)*[d+\-*/]\(*\d+)*\)*$/),a=t("("),r=t(")");return n&&a===r}(e))throw new Error("Formula is invalid.");var t=p(e);return{symbols:t=function e(t){return t=E(t=t.map((function(t){return Array.isArray(t)?e(t):t})),["d"])}(t),total:y(t)}}},w=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(o.a)(t).call(this,e))).maxResults=5,n.state={formula:null,formulaIsInvalid:!1,results:[],showHelp:!1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.formulaIsInvalid?r.a.createElement("div",{class:"alert alert-danger",role:"alert"},"The formula is invalid."):"",n=this.state.showHelp?r.a.createElement("div",{class:"alert alert-info help"},r.a.createElement("h2",null,"Help"),r.a.createElement("p",null,r.a.createElement("em",null,"Click the ",r.a.createElement("strong",null,"Help")," button again to dismiss this info box.")),r.a.createElement("p",null,"Any positive integer number can be entered as part of the formula. Numbers are joined together by operators. Operators include:"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("code",null,"d"),": Roll dice. First number is the quantity of dice. Second number is the number of sides per die."),r.a.createElement("li",null,r.a.createElement("code",null,"*"),": Multiply the two numbers."),r.a.createElement("li",null,r.a.createElement("code",null,"/"),": Divide the first number by the second number."),r.a.createElement("li",null,r.a.createElement("code",null,"+"),": Add the two numbers."),r.a.createElement("li",null,r.a.createElement("code",null,"-"),": Subtract the second number from the first number.")),r.a.createElement("p",null,"Calculation honors traditional order of operations. Calculates dice rolls first, then expressions in parentheses, then multiplication and division, then addition and subtraction."),r.a.createElement("p",null,"Examples:",r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("code",null,"2d6"),": Rolls 2 6-sided dice."),r.a.createElement("li",null,r.a.createElement("code",null,"1d20+5"),": Rolls a 20-sided die and adds 5."),r.a.createElement("li",null,r.a.createElement("code",null,"(4d8+2)/3"),": Rolls 4 8-sided dice and adds 2, then divides by 3.")))):"",a="btn btn-outline-secondary"+(this.state.showHelp?" active":"");return r.a.createElement("div",{class:"container"},r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"rollFormula"},"Formula"),r.a.createElement("div",{class:"input-group"},r.a.createElement("input",{type:"text",class:"form-control",id:"rollFormula",onKeyUp:function(t){return e.handleFormulaKeyUp(t)},onChange:function(t){return e.setState({formula:t.target.value})}}),r.a.createElement("div",{class:"input-group-append"},r.a.createElement("button",{class:a,type:"button",onClick:function(){return e.handleHelpClick()}},"Help"),r.a.createElement("button",{class:"btn btn-primary",type:"submit",onClick:function(){return e.handleRollClick()}},"Roll")))),t,n,r.a.createElement("div",{class:"history"},this.renderHistory()))}},{key:"renderHistory",value:function(){var e=this.state.results.length-1,t=this;return this.state.results.map((function(n,a){var l=a===e?" latest":"",s="row"+l,i="result"+l;return r.a.createElement("div",{class:s},r.a.createElement("div",{class:"col-md-9"},t.renderSymbols(n.symbols)),r.a.createElement("div",{class:"col-md-3"},r.a.createElement("span",{class:i},n.total)))})).reverse()}},{key:"renderSymbols",value:function(e){var t=this;function n(e){var t="symbol"+(e.sides?" die "+function(e,t){var n=function(e){switch(e){case 2:return"coin";case 4:return"d4";case 6:return"d6";case 8:return"d8";case 10:return"d10";case 12:return"d12";case 20:return"d20";default:return null}}(e);return n?"".concat(n," ").concat(n,"-").concat(t):"coin"}(e.sides,e.text):"");return r.a.createElement("span",{class:t},e.text)}var a=n({text:"("}),l=n({text:")"});return e.map((function(s){if(Array.isArray(s)){var i=e.length>1&&(s.length>1||Array.isArray(s[0]));return r.a.createElement("span",null,i?a:"",t.renderSymbols(s),i?l:"")}return e.some((function(e){return e.sides}))&&"+"===s.text?"":n(s)}))}},{key:"handleFormulaKeyUp",value:function(e){13===e.keyCode&&this.handleRollClick()}},{key:"handleHelpClick",value:function(){this.setState({showHelp:!this.state.showHelp})}},{key:"handleRollClick",value:function(){try{var e=g.calculate(this.state.formula);this.addResult(e)}catch(t){this.setState({formulaIsInvalid:!0})}}},{key:"addResult",value:function(e){var t=this.state.results;t.push(e),t.length>this.maxResults&&t.splice(0,1),this.setState({results:t,formulaIsInvalid:!1})}}]),t}(r.a.Component);n(14);var k=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("nav",{class:"navbar navbar-dark bg-dark"},r.a.createElement("a",{class:"navbar-brand",href:"."},r.a.createElement("img",{src:"/image/icon.svg",width:"30",height:"30",class:"d-inline-block align-top",alt:""}),"Diceroll")),r.a.createElement(w,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.beda3329.chunk.js.map